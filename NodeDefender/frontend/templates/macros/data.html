{% macro data_group_looper() %}
<script>
var groupsIndex = 0;
var groupsArray = [];

groupSocket.on('list', function(groups) {
	for (var i = 0; i < groups.length; i++)
		groupsArray.push(groups[i].name);

	dataSocket.emit('groupHeatAverage', groupsArray[0]);
	dataSocket.emit('groupPowerAverage', groupsArray[0]);
	dataSocket.emit('groupEventsAverage', groupsArray[0]);
	groupsIndex++;
	setInterval(groupLooper, 5000);
});

function groupLooper() {
	if (groupsArray.length < 2)
		return;
	dataSocket.emit('groupHeatAverage', groupsArray[groupsIndex]);
	dataSocket.emit('groupPowerAverage', groupsArray[groupsIndex]);
	dataSocket.emit('groupEventsAverage', groupsArray[groupsIndex]);
	groupsIndex++;
	if (groupsIndex > groupsArray.length)
		groupsIndex = 0;
};
</script>
{% endmacro %}
