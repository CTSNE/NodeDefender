{% extends "base.html" %}
{% block content %}
{% from "macros/socket.html" import CreateSocket %}
{{ CreateSocket('socket', 'adminusers') }}
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">
					Admin <small>{{User.firstname}}, {{User.lastname}}</small>
				</h1>
        <ol class="breadcrumb">
					<li class="active">
						<i class="fa fa-map-marker"></i><a href="{{url_for('index')}}"> Dashboard</a>
          </li>
					<li class="active">Node List</li>
       </ol>
    </div>
</div>
{% include "flash.html" %}
{% from "macros/group.html" import ListGroups with context %}
{% from "macros/user.html" import Info, Events, AddGroup, AdminSettings with context %}
<div class="row">
	<div class="col-lg-4">
		<div class="panel panel-primary">
			<div class="panel-heading">
				User Information
				<div class="floatRight" id="userSettings"></div>
			</div>
			<div class="panel-body">
				{{Info(User)}}
			</div>
		</div>
	</div>
	<div class="col-lg-4">
		<div class="panel panel-primary">
			<div class="panel-heading">
				Groups
				<div class="floatRight" id="addGroups"></div>
			</div>
			<div class="panel-body">
				{{ListGroups(User.groups)}}
			</div>
		</div>
	</div>
	<div class="col-lg-4">
		<div class="panel panel-primary">
			<div class="panel-heading">
				Events
			</div>
			<div class="panel-body">
				{{Events(user)}}
			</div>
		</div>
	</div>
</div>

<script>
$(document).ready(function() {
{% if current_user.has_role("administrator") %}
	$('#userSettings').prepend('<a style="color: #FFFFFF;" href="#" data-toggle="modal" data-target="#UserConfigure"><i class="fa fa-pencil" aria-hidden="true"></i></a>');
	$('#addGroups').prepend('<a style="color: #FFFFFF;" href="#" data-toggle="modal" data-target="#AddGroup"><i class="fa fa-plus" aria-hidden="true"></i></a>');
{% endif %}


});
</script>
{{ AdminSettings(User, UserSettings, UserPassword) }} 
{{ AddGroup(User, UserGroupAdd) }}
{% endblock %}
