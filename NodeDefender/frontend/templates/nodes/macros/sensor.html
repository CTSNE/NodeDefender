{% macro SensorBox(Sensor) %}
{% from "nodes/macros/fields.html" import Switch, Box, Value %}
<form name="#" class="form-horizontal" method="#">
{% for field in Sensor.fields %}
{% if field.display  %}
	{% if field.type == 'switch' %}
		{{ Switch(field) }}
	{% elif field.type == 'box' %}
		{{ Box(field) }}
	{% elif field.type == 'value' %}
		{{ Value(field) }}
	{% endif %}
{% endif %}
{% endfor %}
</form>
{% endmacro %}

{% macro SensorSockets(sensors) %}
<script>
namespace = '/icpe';
var icpesocket = io.connect('http://' + document.domain + ':' location.port + namespace);

function checkboxClick(box, icpe, nodeid, cmdclass) {
	$(box).addClass('disabled');
	if (box.checked) {
		
	} else {

	}
	$(box).removeClass('disabled');
}

icpesocket.on('connect', function() {
	icpesocket.emit('JoiniCPE', {icpe : '{{sensors[0].icpe.macaddraddr}}');
});

icpesocket.on('iCPEEvent', function(msg) {
	console.log(msg);
});

</script>
{% endmacro %}
